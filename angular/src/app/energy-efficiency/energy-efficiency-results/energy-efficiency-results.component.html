<app-spinner-and-error-container [loading]="isLoading" [error]="isError" [errorMessage]="errorMessage"></app-spinner-and-error-container>
<div class="results-page" *ngIf="!isLoading && !isError">
    <div class="page-row results-header-row">
        <div class="page-row-content">
            <h1 class="heading-text">Now build your plan</h1>
            <div class="header-data-cards">
                <app-data-card
                        heading="Your estimated monthly bills are"
                        [value]="'Â£' + energyCalculations.currentMonthlyBillPoundsRounded"
                        [isVerticalAtMobile]="true"
                ></app-data-card>
            </div>
        </div>
    </div>
    <div class="page-row recommendations">
        <div class="page-row-content">
            <div class="ghg-context-card" *ngIf="this.isEligibleForGreenHomesGrant">
                <div class="header">Green Homes Grant</div>
                <ng-container *ngIf="isOwnerOccupied">
                    <p>You could save money on these improvements with the Green Homes Grant.<p>
                    <p>To be eligible, you must add at least one <span class="tag">GHG Eligible (primary)</span> measure to your plan.</p>
                    <p>To apply, you will need quotes from an approved installer. We well help you find installers for measures in your plan.</p>
                </ng-container>
                <ng-container *ngIf="!isOwnerOccupied">
                    <p>Your landlord might be eligible to use the Green Homes Grant to make these improvements.</p>
                </ng-container>
                <p>Please visit <a [routerLink]="'/pages/green-homes-grant'">this page</a> for more information.</p>
            </div>
            <div class="recommendation-cards">
                <app-energy-efficiency-recommendation-card
                        *ngFor="let recommendation of getUserRecommendations()"
                        [recommendation]="recommendation"
                        [showMonthlySavings]="!isOwnerOccupied"
                        [showAddToPlanColumn]="!showDefaultRecommendation && !showDefaultRentalMeasures"
                ></app-energy-efficiency-recommendation-card>
                <app-energy-efficiency-combined-recommendation-card
                        *ngIf="shouldShowLandlordRecommendation() && getLandlordRecommendations().length"
                        [combinedHeadline]="combinedLandlordRecommendationHeadline"
                        [combinedSummary]="'Since you are renting, some of our recommendations will need to be carried out by your landlord.'"
                        [combinedIconPath]="'icons/home-improve.svg'"
                        [recommendations]="getLandlordRecommendations()"
                        [showMonthlySavings]="!isOwnerOccupied"
                        [showAddToPlanColumn]="!showDefaultRecommendation && !showDefaultRentalMeasures"
                ></app-energy-efficiency-combined-recommendation-card>
            </div>
        </div>
    </div>
    <app-sticky-row-wrapper>
        <app-your-plan-footer
                (onDoPlan)="sendEventToAnalytics('do_clicked')"
        ></app-your-plan-footer>
    </app-sticky-row-wrapper>
</div>
