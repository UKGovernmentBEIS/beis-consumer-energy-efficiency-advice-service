<app-spinner-and-error-container [loading]="isLoading" [error]="isError"></app-spinner-and-error-container>
<app-need-help></app-need-help>
<div class="results-page" *ngIf="!isLoading && !isError">
    <div class="page-row">
        <div class="heading page-row-content">
            <h2 class="heading-text">Your recommendations</h2>
            <div class="heading-explanation">
                Your score is calculated using a combination of the energy efficiency rating of your home and how you
                use electricity and gas every day
            </div>
        </div>
    </div>
    <div class="potentials-container page-row">
        <div class="page-row-content">
            <app-potentials class="potentials"
                            [totalInvestment]="getTotalInvestment()"
                            [totalSavings]="getTotalSavings()">
            </app-potentials>
        </div>
    </div>
    <div class="recommendations-container page-row" *ngIf="recommendations && recommendations.length > 0">
        <div class="recommendations page-row-content">
            <div class="subheading">Your top recommendations</div>
            <div class="recommendation-cards">
                <app-recommendation-card class="recommendation-card"
                                         *ngFor="let recommendation of recommendations.slice(0, displayedRecommendations) trackBy $index"
                                         [recommendation]="recommendation">
                </app-recommendation-card>
            </div>
            <div class="further-actions">
                <button class="see-more"
                        [style.visibility]="displayedRecommendations < recommendations.length ? 'visible' : 'hidden'"
                        (click)="displayedRecommendations = recommendations.length">
                    <span class="see-more-text">See all recommendations ({{recommendations.length}})</span>
                    <span class="icon-caret-down"></span>
                </button>
                <button class="further-questions"
                        [style.visibility]="behaviourQuestionnaireComplete() ? 'hidden' : 'visible'"
                        routerLink="/js/energy-efficiency/questionnaire/behaviour">
                    Answer a few more questions to narrow down additional results for you
                </button>
            </div>
        </div>
    </div>
    <div class="page-row" *ngIf="availableGrants && availableGrants.length > 0">
        <div class="grants page-row-content">
            <div class="subheading">Grants you might be eligible for</div>
            <div class="local-authority">You live in {{localAuthorityName}} and we've found the following:</div>
            <div class="grant-cards">
                <app-grant-card class="grant-card"
                                *ngFor="let grant of availableGrants"
                                [grant]="grant">
                </app-grant-card>

            </div>
        </div>
    </div>
    <div class="whats-next page-row">
        <div class="page-row-content">
            <div class="subheading">What's next</div>
            <div class="explanation">
                From your recommendations, we've found some things that will help you get on your way
            </div>
            <div class="latest-news-cards">
                <app-latest-news-card iconClassName="icon-video-play"
                                      heading="How to draught-proof your home">
                </app-latest-news-card>
                <app-latest-news-card iconClassName="icon-infographic"
                                      heading="5 simple tips to save energy this winter">
                </app-latest-news-card>
                <app-latest-news-card iconClassName="icon-checklist"
                                      heading="How to choose the right installer">
                </app-latest-news-card>
                <app-latest-news-card iconClassName="icon-grant"
                                      heading="Info on grants">
                </app-latest-news-card>
            </div>
        </div>
    </div>
</div>
